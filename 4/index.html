<!DOCTYPE html>
<html>
<head>
    <title>Project 4: </title>
    <title> Project 4A: Image Warping and Mosaicing </title>
    <style>
        body {
            font-family: Georgia, Times New Roman, Arial, sans-serif;
            margin: 40px;
            padding: 40px;
        }

        .container {
            max-width: 800px;
            margin: 40px;
            padding: 40px;
            text-align: center;
        }

        .image-row {
            display: flex;
            justify-content: center; 
            gap: 0;
        }

        .image-row img {
            width: 200px;  
            height: auto;     
            object-fit: contain;
        }

        .big-row img {
            width: 400px; 
            height: 400px;    
            padding: 0;    
            margin: 0;    
            border: none;  
            gap: 5;
        }

        .mid-row img {
            width: 200px; 
            height: 200px;    
            padding: 0;    
            margin: 0;    
            border: none;  
            gap: 5;
        }

        figure {
            text-align: center;
        }
 
        .center-text {
            text-align: center; 
        }
        
    </style>
    
</head>
<body>
    <h1> Project 4: Auto-Stitching Photo Mosaics </h1>
    <h2> by Maya Joiner </h2>

    
    <h2> Part 4A: Image Warping and Mosaicing </h2>

    <p> In this part, I create a homography matrix to warp Images onto different perspectives and ultimately create a photo mosaic. </p>


    
    <h4> Images Used: Rectification </h4>
    <div class="image-row big-row">
    <p><img src="media/music.jpg" /></p>
    <p><img src="media/owl.png" /></p>
    <p><img src="media/aviation.jpg" /></p>
    </div>

    <figure>
    <p> Some things on my wall in my room. The last photo is a photo I took of the sky in south Seattle. </i> </p>
    </figure>

    <h4> Images Used: Mosaic of Berkeley </h4>
    <div class="image-row big-row">
    <p><img src="media/berk1.jpg" /></p>
    <p><img src="media/berk2.jpg" /></p>
    </div>


    <figure>
    <p> View of Berkeley Campus from my friend's apartment. </p>
    </figure>

    <h4> Images Used: Mosaic of Sunset </h4>
    <div class="image-row big-row">
    <p><img src="media/sunset1.png" /></p>
    <p><img src="media/sunset2.png" /></p>
    </div>

    <figure>
    <p> View of Downtown from another friend's apartment. </p>
    </figure>

    <h4> Images Used: Mosaic of Archipelago </h4>
    <div class="image-row big-row">
    <p><img src="media/zelda1.jpg" /></p>
    <p><img src="media/zelda2.jpg" /></p>
    </div>

    <figure>
    <p> View from the Necluda Sky Archipelago from <i> The Legend of Zelda: Tears of the Kingdom </i>. </p> 
    </figure>

    
    <p> In order to create a mosaic, I first created a homography matrix, which is a 3x3 matrix used for warping source points p into the destination points q. Here is a derivation: </p>

    <div class="image-row big-row">
    <p><img src="media/page1.png" /></p>
    <p><img src="media/page2.png" /></p>
    </div>

    <p> These equations are solved via least squares to get the homography matrix H. Once we get that, we can inverse warp the destination points q using the inverse of the H matrix to calculate where the points in the source image came from. One tricky thing about the warping function was that I needed to make a new bigger canvas for warped image just in case some pixels from the source image warp to a pixel location beyond the size of the image. For interpolation, I used nearest instead of bilinear interpolation because 1) it was easier and 2) my code for bilinear interpolation for project 3 was very slow and I didn't want to use it again. </p>

    <p> We can use this warp function to rectify images: </p>

    <div class="image-row big-row">
    <p><img src="media/owl.png" /></p>
    <p><img src="media/owl_rectified.png" /></p>
    </div>

    <div class="image-row big-row">
    <p><img src="media/music.jpg" /></p>
    <p><img src="media/music_rectified.png" /></p>
    </div>

    <div class="image-row big-row">
    <p><img src="media/aviation.jpg" /></p>
    <p><img src="media/rectified_av.png" /></p>
    </div>

    <p> We can also use this function to create panoramas using two images. To blend the images seamlessly, I used code from project 2 to create Laplacian stacks of images and a Gaussian stack of a simple black and white mask (which I created myself). </p>

    <div class="image-row big-row">
    <p><img src="media/berk1.jpg" /></p>
    <p><img src="media/berk2.jpg" /></p>
    <p><img src="media/mosaic_berk_final.png" /></p>
    </div>

    <div class="image-row big-row">
    <p><img src="media/sunset1.png" /></p>
    <p><img src="media/sunset2.png" /></p>
    <p><img src="media/mosaic_sunset_final.png" /></p>
    </div>

    <div class="image-row big-row">
    <p><img src="media/zelda1.jpg" /></p>
    <p><img src="media/zelda2.jpg" /></p>
    <p><img src="media/mosaic_zelda_final.png" /></p>
    </div>

    <h2> Conclusion </h2>
    <p> In this project I played around with mosaics. One key takeaway I learned is that image mosaicing is a little bit more complex than the other topics in past projects because it incorporates morphing and blending at the same time. </p>
    
</body>
</html>
